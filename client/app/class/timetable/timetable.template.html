<header class="l-subheader">
   <h2>Timetable</h2>
</header>

<!-- Timetable -->
<section class="m-timetable l-container">
    <div class="m-timetable__container  m-modals__mask">
        <!-- School day -->
        <div ng-repeat="day in $ctrl.userClass.timetable"
             class="m-timetable__day-box unhover">
            <h3>{{day.day}}</h3>
            <ol class="m-timetable__subjects-wrapper">
                <!-- Single Subject -->
                <li ng-repeat="subject in day.subjects"
                    class="l-dropdown-wrapper is-close">
                    <span class="m-timetable__subject l-pill__default l-pill--block l-dropdown__btn">
                        {{subject}}
                        <button class="l-btn__default l-btn__close">
                            <span class="l-btn__close-icon"></span>
                        </button>
                    </span>
                    <ul class="l-dropdown__menu">
                        <li ng-repeat="sub in $ctrl.userClass.subjects"
                            class="l-dropdown__menu-item">
                            {{::sub}}
                        </li>
                    </ul>
                    <button class="l-btn__close l-btn__default">
                        <span class="l-btn__close-icon"></span>
                    </button>
                </li>
            </ol>
            <div class="l-btn__wrapper">
                <button class="l-btn__add l-btn__default l-btn__add--big">
                    <span class="l-btn__add-icon"></span>
                </button>
                <!-- Modal -->
                <div class="m-modals__add-modal">
                    <h5>Add subject</h5>
                    <div class="l-dropdown-wrapper is-close">
                        <div class="l-inputs__text-type l-dropdown__btn">
                            Subject
                        </div>
                        <ul class="l-dropdown__menu">
                            <li ng-repeat="sub in $ctrl.userClass.subjects"
                                class="l-dropdown__menu-item">
                                {{::sub}}
                            </li>
                        </ul>
                    </div>
                    <button class="l-btn__default l-btn__primary">Add</button>
                </div>
            </div>
        </div>
    </div>
</section>

<script type="text/javascript">
    setTimeout(function() {
        modal = function(){
            var btn = $(".l-btn__add");
                mask = $('.m-modals__mask');

            btn.click(function(){

                //Open modal
                $(this).siblings('.m-modals__add-modal').removeClass('is-close').addClass('is-open');
                $(this).parents('.m-modals__mask').addClass('is-open');
                //Add modal mask
                $(this).parents('.m-modals__mask').prepend('<div id="m-modals-mask"></div>');

                $('#m-modals-mask').click(function(){
                    //Close modal
                    mask.removeClass('is-open');
                    $('.m-modals__add-modal.is-open').removeClass('is-open').addClass('is-close');
                    //Remove modal mask
                    $(this).remove();

                });
            });
        }();

        dropdown = function(){
            var btn = $('.l-dropdown__btn');

            btn.click(function(){
                $(this).parent('.l-dropdown-wrapper').toggleClass("is-open is-close");
            })
        }();
    }, 1000)
</script>
